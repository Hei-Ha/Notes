## CSRF 攻击

### CSRF 攻击是什么？
中文：跨站请求伪造。  
英文：Cross-site request forgery，通常缩写为 CSRF 或者 XSRF，  
是一种挟持用户在当前已登陆的 web 应用程序上执行非本意操作的攻击方式。

### 攻击过程
1. 用户登陆并信任了网站A。
2. 网站A，在 用户浏览器上产生 网站A 的Cookie
3. 用户在没有登出A 网站的情况下，访问危险网站 B
4. 危险网站B 要求用户访问第三方链接 A, 并发出一个请求 。
5. 根据 B 在上一步的请求，浏览器会带着 第2步中的Cookie 访问网站A
6. 由于浏览器会自动带上用户的额Cookie，网站A不清楚第5步中的请求是用户主动发出的，还是 恶意网站B 发出的，所以网站A会处理第5步的请求。
这样恶意网站B 就达到了冒充用户做自己想要的操作的目的。

### CSRF 攻击特点
+ 攻击一般发起在第三方网站，而不是被攻击的网站。被攻击的网站无法防止攻击发生。
+ 攻击利用受害者在被攻击网站的登录凭证，冒充受害者提交操作；而不是直接窃取数据
+ 整个过程攻击者不能获取到受害者的登录凭证，仅仅是“冒用”。
+ 不容易追踪。


### 如何防御
+ 使用验证码：强制用户使用验证码与服务器交互，否则不允许交互。
+ 验证 Referer：验证请求的 Referer 内容，但是这种办法并不是百分百有效，并且低版本浏览器可以伪造 Referer
+ token：token 验证的 CSRF 防御机制是公认最合适的方案。但若网站同时存在 XSS 漏洞的时候，这个方法也没用。
